{"version":3,"file":"static/js/934.ca9f2d2e.chunk.js","mappings":"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","sources":["components/drap-and-drop.tsx","utils/kanban.ts","utils/task-type.ts","assets/bug.svg","assets/task.svg","screens/kanban/create-task.tsx","screens/kanban/mark.tsx","screens/kanban/delete-kanban.tsx","screens/kanban/kanban-column.tsx","screens/kanban/create-kanban.tsx","components/task-type-select.tsx","screens/kanban/search-panel.tsx","screens/kanban/task-modal.tsx","screens/kanban/index.tsx"],"sourcesContent":["import React, { ReactNode } from 'react'\nimport {\n  Droppable,\n  DroppableProps,\n  DroppableProvided,\n  DroppableProvidedProps,\n  DraggableProps,\n  Draggable,\n} from 'react-beautiful-dnd'\n\ntype DropProps = Omit<DroppableProps, 'children'> & { children: ReactNode }\nexport const Drop = ({ children, ...props }: DropProps) => {\n  return (\n    <Droppable {...props}>\n      {(provided) => {\n        if (React.isValidElement(children)) {\n          return React.cloneElement<any>(children, {\n            ...provided.droppableProps,\n            ref: provided.innerRef,\n            provided,\n          })\n        }\n        return <div />\n      }}\n    </Droppable>\n  )\n}\n\ntype DropChildProps = Partial<{\n  provided: DroppableProvided & DroppableProvidedProps\n}> &\n  React.HTMLAttributes<HTMLDivElement>\nexport const DropChild = React.forwardRef<HTMLDivElement, DropChildProps>(\n  ({ children, ...props }, ref) => (\n    <div ref={ref} style={{ minHeight: '5px' }}>\n      {children}\n      {props.provided?.placeholder}\n    </div>\n  )\n)\n\ntype DragProps = Omit<DraggableProps, 'children'> & { children: ReactNode }\nexport const Drag = ({ children, ...props }: DragProps) => {\n  return (\n    <Draggable {...props}>\n      {(provided) => {\n        if (React.isValidElement(children)) {\n          return React.cloneElement<any>(children, {\n            ...provided.draggableProps,\n            ...provided.dragHandleProps,\n            ref: provided.innerRef,\n          })\n        }\n        return <div />\n      }}\n    </Draggable>\n  )\n}\n","import { QueryKey, useMutation, useQuery } from \"react-query\";\nimport { Kanban } from \"types/kanban\";\nimport { Task } from \"types/task\";\nimport { useHttp } from \"./http\";\nimport {\n  useAddConfig,\n  useDeleteConfig,\n  useReorderKanbanConfig,\n} from \"./use-optimistic-optins\";\n\nexport const useKanbans = (param?: Partial<Kanban>) => {\n  const client = useHttp();\n  return useQuery<Task[]>([\"kanbans\", param], () =>\n    client(\"kanbans\", { data: param })\n  );\n};\nexport const useAddKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation(\n    (param: Partial<Kanban>) =>\n      client(`kanbans`, { method: \"POST\", data: param }),\n    useAddConfig(queryKey)\n  );\n};\nexport const useDeleteKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation(\n    ({ id }: { id: number }) => client(`kanbans/${id}`, { method: \"DELETE\" }),\n    useDeleteConfig(queryKey)\n  );\n};\n\nexport interface SortProps {\n  fromId: number;\n  referenceId: number;\n  type: \"before\" | \"after\";\n  fromKanbanId?: number;\n  toKanbanId?: number;\n}\n\nexport const useReorderKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation((params: SortProps) => {\n    return client(\"kanbans/reorder\", { data: params, method: \"POST\" });\n  }, useReorderKanbanConfig(queryKey));\n};\n","import { useQuery } from \"react-query\";\nimport { TaskType } from \"types/task-type\";\nimport { useHttp } from \"./http\";\n\nexport const useTasksType = () => {\n  const client = useHttp();\n  return useQuery<TaskType[]>([\"taskTypes\"], () => client(\"taskTypes\"));\n};\n","var _desc, _g;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgBug(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    xlinkHref: \"http://www.w3.org/1999/xlink\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"bug\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(1 1)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 14,\n    height: 14,\n    rx: 2,\n    fill: \"#E5493A\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m10 7c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3\",\n    fill: \"#fff\"\n  })))));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBug);\nexport default __webpack_public_path__ + \"static/media/bug.06db5a45894297a73db906abf758f54f.svg\";\nexport { ForwardRef as ReactComponent };","var _desc, _g;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgTask(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"task\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"a\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(1 1)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 14,\n    height: 14,\n    rx: 2,\n    fill: \"#4BADE8\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(4 4.5)\",\n    stroke: \"#fff\",\n    strokeLinecap: \"round\",\n    strokeWidth: 2\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m2 5 4-5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m2 5-2-2\"\n  }))))));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTask);\nexport default __webpack_public_path__ + \"static/media/task.d2777a84971e1d82df2b66d12b63b2c4.svg\";\nexport { ForwardRef as ReactComponent };","import { Button, Card, Input } from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { useAddTask } from \"utils/task\";\nimport { useProjectIdInUrl, useTaskQueryKey } from \"./util\";\n\nexport default function CreateTask({ kanbanId }: { kanbanId: number }) {\n  const [name, setName] = useState(\"\");\n  const [inputMode, setInputMode] = useState(false);\n  const projectId = useProjectIdInUrl();\n\n  const { mutateAsync: addTask } = useAddTask(useTaskQueryKey());\n  const submit = async () => {\n    await addTask({ projectId, kanbanId, name });\n    setInputMode(false);\n    setName(\"\");\n  };\n  useEffect(() => {\n    if (!inputMode) {\n      setName(\"\");\n    }\n  }, [inputMode]);\n  return (\n    <div>\n      {inputMode ? (\n        <Card style={{ marginBottom: \"0.5rem\" }}>\n          <Input\n            placeholder=\"需要做些什么\"\n            value={name}\n            onChange={(evt) => setName(evt.target.value)}\n            onPressEnter={submit}\n          ></Input>\n        </Card>\n      ) : (\n        <Button type=\"link\" onClick={() => setInputMode(true)}>\n          +创建事务\n        </Button>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useTaskSearchParams } from \"./util\";\n\nexport default function Mark({ name }: { name: string }) {\n  const { name: keyword } = useTaskSearchParams();\n  if (!keyword) return <>{name}</>;\n  const array = name.split(keyword);\n  console.log(array, \"1\", name, 2, keyword, 3);\n  return (\n    <>\n      {array.map((str, index) => (\n        <span key={index}>\n          {str}\n          {index === array.length - 1 ? null : (\n            <span style={{ color: \"#257AFD\" }}>{keyword}</span>\n          )}\n        </span>\n      ))}\n    </>\n  );\n}\n","import { Button, Dropdown, MenuProps, Modal, Space } from \"antd\";\nimport React from \"react\";\nimport { useDeleteKanban } from \"utils/kanban\";\nimport { useKanbanQueryKey } from \"./util\";\n\nexport default function DeleteKanban({ kanbanId }: { kanbanId: number }) {\n  const { mutateAsync: deleteKanban } = useDeleteKanban(useKanbanQueryKey());\n  const startDelete = () => {\n    Modal.confirm({\n      okText: \"确定\",\n      cancelText: \"取消\",\n      title: \"确定删除看板吗?\",\n      onOk() {\n        deleteKanban({ id: kanbanId });\n      },\n    });\n  };\n  const items: MenuProps[\"items\"] = [\n    {\n      key: \"delete\",\n      label: (\n        <Button type=\"link\" onClick={startDelete}>\n          删除\n        </Button>\n      ),\n    },\n  ];\n  return (\n    <Dropdown menu={{ items }}>\n      <Button type=\"link\" onClick={(e) => e.preventDefault}>\n        <Space>...</Space>\n      </Button>\n    </Dropdown>\n  );\n}\n","import React, { forwardRef } from \"react\";\nimport { Kanban } from \"types/kanban\";\nimport { useTasks } from \"utils/task\";\nimport { useTasksType } from \"utils/task-type\";\nimport { useTaskModal, useTaskSearchParams } from \"./util\";\nimport bugIcon from \"assets/bug.svg\";\nimport taskIcon from \"assets/task.svg\";\nimport styled from \"@emotion/styled\";\nimport { Card } from \"antd\";\nimport CreateTask from \"./create-task\";\nimport { Task } from \"types/task\";\nimport Mark from \"./mark\";\nimport { Row } from \"components/lib\";\nimport DeleteKanban from \"./delete-kanban\";\nimport { Drag, Drop, DropChild } from \"components/drap-and-drop\";\n\nexport const CloumnCard = React.forwardRef(({ task }: { task: Task }) => {\n  const { startEdit } = useTaskModal();\n  return (\n    <Card\n      style={{ marginBottom: \"0.5rem\", cursor: \"pointer\" }}\n      key={task.id}\n      onClick={() => startEdit(task.id)}\n    >\n      <Mark name={task.name} />\n      <TaskTypeIcon id={task.typeId} />\n    </Card>\n  );\n});\n\nexport const KanbanColumn = React.forwardRef<\n  HTMLDivElement,\n  { kanban: Kanban }\n>(({ kanban, ...props }, ref) => {\n  const { data: allTasks } = useTasks(useTaskSearchParams());\n  const tasks = allTasks?.filter((task) => task.kanbanId === kanban.id);\n  return (\n    <Container ref={ref} {...props}>\n      <Row bettween={true}>\n        <h2>{kanban.name}</h2>\n        <DeleteKanban kanbanId={kanban.id} key={kanban.id} />\n      </Row>\n      <TaskContainer>\n        <Drop\n          type={\"ROW\"}\n          direction={\"vertical\"}\n          droppableId={String(kanban.id)}\n        >\n          <DropChild>\n            {tasks?.map((task, index) => (\n              <Drag key={task.id} index={index} draggableId={\"task\" + task.id}>\n                <div>\n                  <CloumnCard task={task} key={task.id} />\n                </div>\n              </Drag>\n            ))}\n          </DropChild>\n        </Drop>\n        <CreateTask kanbanId={kanban.id} />\n      </TaskContainer>\n    </Container>\n  );\n});\nconst TaskTypeIcon = ({ id }: { id: number }) => {\n  const { data: taskTypes } = useTasksType();\n  const name = taskTypes?.find((taskType) => taskType.id === id)?.name;\n  if (!name) {\n    return null;\n  }\n  return (\n    <img\n      src={name === \"task\" ? taskIcon : bugIcon}\n      alt={\"类型图标\"}\n      style={{ width: \"16px\" }}\n    />\n  );\n};\nexport const Container = styled.div`\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem;\n  margin-right: 1.5rem;\n`;\nconst TaskContainer = styled.div`\n  overflow: scroll;\n  flex: 1;\n  ::-webkit-scrollbar {\n    display: none;\n  }\n`;\n","import { Input } from \"antd\";\nimport React, { useState } from \"react\";\nimport { useAddKanban } from \"utils/kanban\";\nimport { Container } from \"./kanban-column\";\nimport { useKanbanQueryKey, useProjectIdInUrl } from \"./util\";\n\nexport default function CreateKanban() {\n  const [name, setName] = useState(\"\");\n  const projectId = useProjectIdInUrl();\n  const { mutateAsync: addKanban } = useAddKanban(useKanbanQueryKey());\n  const submit = async () => {\n    await addKanban({ name, projectId });\n    setName(\"\");\n  };\n  return (\n    <Container>\n      <Input\n        size=\"large\"\n        placeholder=\"新建看板名称\"\n        onPressEnter={submit}\n        value={name}\n        onChange={(evt) => setName(evt.target.value)}\n      ></Input>\n    </Container>\n  );\n}\n","import { useTasksType } from \"utils/task-type\";\nimport IdSelect from \"./id-selcet\";\nimport React from \"react\";\n\nconst TaskTypeSelect = (props: React.ComponentProps<typeof IdSelect>) => {\n  const { data: taskTypes } = useTasksType();\n  return <IdSelect options={taskTypes || []} {...props} />;\n};\n\nexport default TaskTypeSelect;\n","import { Button, Input } from \"antd\";\nimport { Row } from \"components/lib\";\nimport TaskTypeSelect from \"components/task-type-select\";\nimport UserSelect from \"components/user-select\";\nimport React from \"react\";\nimport { useSetUrlSearchParam } from \"utils/url\";\nimport { useTaskSearchParams } from \"./util\";\n\nexport default function SearchPanel() {\n  const searchParams = useTaskSearchParams();\n  const setSearchParams = useSetUrlSearchParam();\n  const reset = () => {\n    setSearchParams({\n      typeId: undefined,\n      processorId: undefined,\n      tagId: undefined,\n      name: undefined,\n    });\n  };\n  return (\n    <Row gap={true} style={{ marginBottom: \"3.6rem\" }}>\n      <Input\n        style={{ width: \"20rem\" }}\n        placeholder={\"任务名\"}\n        value={searchParams.name}\n        onChange={(evt) => setSearchParams({ name: evt.target.value })}\n      ></Input>\n      <UserSelect\n        defaultOptionName=\"经办人\"\n        value={searchParams.processorId}\n        onChange={(value) => setSearchParams({ processorId: value })}\n      ></UserSelect>\n      <TaskTypeSelect\n        defaultOptionName=\"项目类型\"\n        value={searchParams.typeId}\n        onChange={(value) => setSearchParams({ typeId: value })}\n      />\n      <Button onClick={reset}>清除筛选器</Button>\n    </Row>\n  );\n}\n","import { Button, Form, Input, Modal } from \"antd\";\nimport { useForm } from \"antd/es/form/Form\";\nimport TaskTypeSelect from \"components/task-type-select\";\nimport UserSelect from \"components/user-select\";\nimport React, { useEffect } from \"react\";\nimport { useDeleteTask, useEditTask } from \"utils/task\";\nimport { useTaskModal, useTaskQueryKey } from \"./util\";\n\nexport default function TaskModal() {\n  const layout = { labelCol: { span: 8 }, wrapperCol: { span: 16 } };\n  const [form] = useForm();\n  const { editingTask, editingTaskId, close } = useTaskModal();\n  const { mutateAsync: editTask, isLoading: editLoading } = useEditTask(\n    useTaskQueryKey()\n  );\n  const onOk = async () => {\n    await editTask({ ...editingTask, ...form.getFieldsValue() });\n    close();\n  };\n  const onCancel = () => {\n    form.resetFields();\n    close();\n  };\n  const { mutateAsync: deleteTask } = useDeleteTask(useTaskQueryKey());\n  const startDelete = () => {\n    Modal.confirm({\n      okText: \"确定?\",\n      cancelText: \"取消\",\n      onOk: async () => {\n        await deleteTask({ id: Number(editingTaskId) });\n        close();\n      },\n      title: \"确定删除任务吗\",\n    });\n  };\n  useEffect(() => {\n    form.setFieldsValue(editingTask);\n  }, [editingTask, form]);\n  return (\n    <Modal\n      open={!!editingTaskId}\n      okText={\"确定\"}\n      cancelText={\"取消\"}\n      onCancel={onCancel}\n      onOk={onOk}\n      title={\"编辑任务\"}\n    >\n      <Form {...layout} form={form} initialValues={editingTask}>\n        <Form.Item\n          label={\"任务名\"}\n          name={\"name\"}\n          rules={[{ required: true, message: \"请输入任务名\" }]}\n        >\n          <Input />\n        </Form.Item>\n        <Form.Item label={\"经办人\"} name={\"processorId\"}>\n          <UserSelect />\n        </Form.Item>\n        <Form.Item label={\"类型\"} name={\"typeId\"}>\n          <TaskTypeSelect />\n        </Form.Item>\n        <div style={{ textAlign: \"right\" }}>\n          <Button type=\"link\" size=\"small\" onClick={startDelete}>\n            删除\n          </Button>\n        </div>\n      </Form>\n    </Modal>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { Spin } from \"antd\";\nimport { Drag, Drop, DropChild } from \"components/drap-and-drop\";\nimport { ScreenContainer } from \"components/lib\";\nimport React, { memo, useCallback } from \"react\";\nimport { DragDropContext, DropResult } from \"react-beautiful-dnd\";\nimport { useDocumentTitle } from \"utils\";\nimport { useKanbans, useReorderKanban } from \"utils/kanban\";\nimport { useReorderTask, useTasks } from \"utils/task\";\nimport CreateKanban from \"./create-kanban\";\nimport { KanbanColumn } from \"./kanban-column\";\nimport SearchPanel from \"./search-panel\";\nimport TaskModal from \"./task-modal\";\nimport {\n  useKanbanQueryKey,\n  useKanbanSearchParams,\n  useProjectInUrl,\n  useTaskQueryKey,\n  useTaskSearchParams,\n} from \"./util\";\n\nconst KanbanScreen = memo(() => {\n  useDocumentTitle(\"看板列表\");\n  const { data: kanbans, isLoading: kanbanIsLoading } = useKanbans(\n    useKanbanSearchParams()\n  );\n  const { data: currentProject } = useProjectInUrl();\n  const { isLoading: taskIsLoading } = useTasks(useTaskSearchParams());\n  const isLoading = taskIsLoading || kanbanIsLoading;\n  const onDragEnd = useDragEnd();\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <ScreenContainer>\n        <h1>{currentProject?.name}看板</h1>\n        <SearchPanel />\n        {isLoading ? (\n          <Spin size=\"large\" />\n        ) : (\n          <Drop type={\"COLUMN\"} direction={\"horizontal\"} droppableId={\"kanban\"}>\n            <ColumnsContainer>\n              <DropChild>\n                <div style={{ display: \"flex\", height: \"100% \" }}>\n                  {kanbans?.map((kanban, index) => (\n                    <Drag\n                      key={kanban.id}\n                      draggableId={\"kanban\" + kanban.id}\n                      index={index}\n                    >\n                      <KanbanColumn kanban={kanban}></KanbanColumn>\n                    </Drag>\n                  ))}\n                </div>\n              </DropChild>\n              <CreateKanban />\n            </ColumnsContainer>\n          </Drop>\n        )}\n        <TaskModal />\n      </ScreenContainer>\n    </DragDropContext>\n  );\n});\n\nexport const useDragEnd = () => {\n  const { data: kanbans } = useKanbans(useKanbanSearchParams());\n  const { mutate: reorderKanban } = useReorderKanban(useKanbanQueryKey());\n  const { mutate: reorderTask } = useReorderTask(useTaskQueryKey());\n  const { data: allTasks = [] } = useTasks(useTaskSearchParams());\n  return useCallback(\n    ({ source, destination, type }: DropResult) => {\n      if (!destination) {\n        return;\n      }\n      // 看板排序\n      if (type === \"COLUMN\") {\n        const fromId = kanbans?.[source.index].id;\n        const toId = kanbans?.[destination.index].id;\n        if (!fromId || !toId || fromId === toId) {\n          return;\n        }\n        const type = destination.index > source.index ? \"after\" : \"before\";\n        reorderKanban({ fromId, referenceId: toId, type });\n      }\n      if (type === \"ROW\") {\n        const fromKanbanId = +source.droppableId;\n        const toKanbanId = +destination.droppableId;\n        const fromTask = allTasks.filter(\n          (task) => task.kanbanId === fromKanbanId\n        )[source.index];\n        const toTask = allTasks.filter((task) => task.kanbanId === toKanbanId)[\n          destination.index\n        ];\n        if (fromTask?.id === toTask?.id) {\n          return;\n        }\n        reorderTask({\n          fromId: fromTask?.id,\n          referenceId: toTask?.id,\n          fromKanbanId,\n          toKanbanId,\n          type:\n            fromKanbanId === toKanbanId && destination.index > source.index\n              ? \"after\"\n              : \"before\",\n        });\n      }\n    },\n    [kanbans, reorderKanban, allTasks, reorderTask]\n  );\n};\nexport const ColumnsContainer = styled.div`\n  display: flex;\n  overflow-x: scroll;\n  flex: 1;\n`;\nexport default KanbanScreen;\n"],"names":["Drop","children","props","provided","React","droppableProps","ref","innerRef","DropChild","style","minHeight","placeholder","Drag","draggableProps","dragHandleProps","useKanbans","param","client","useHttp","useQuery","data","useAddKanban","queryKey","useMutation","method","useAddConfig","useDeleteKanban","id","useDeleteConfig","useTasksType","CreateTask","kanbanId","useState","name","setName","inputMode","setInputMode","projectId","useProjectIdInUrl","addTask","useAddTask","useTaskQueryKey","mutateAsync","submit","useEffect","marginBottom","value","onChange","evt","target","onPressEnter","type","onClick","Mark","keyword","useTaskSearchParams","array","split","console","log","map","str","index","key","length","color","DeleteKanban","deleteKanban","useKanbanQueryKey","items","label","Modal","okText","cancelText","title","onOk","menu","e","preventDefault","CloumnCard","task","startEdit","useTaskModal","cursor","TaskTypeIcon","typeId","KanbanColumn","kanban","allTasks","useTasks","tasks","filter","Container","bettween","TaskContainer","direction","droppableId","String","draggableId","taskTypes","find","taskType","src","taskIcon","bugIcon","alt","width","styled","CreateKanban","addKanban","size","options","SearchPanel","searchParams","setSearchParams","useSetUrlSearchParam","gap","defaultOptionName","processorId","undefined","tagId","TaskModal","useForm","form","editingTask","editingTaskId","close","useEditTask","editTask","isLoading","getFieldsValue","deleteTask","useDeleteTask","setFieldsValue","open","onCancel","resetFields","labelCol","span","wrapperCol","initialValues","rules","required","message","textAlign","Number","KanbanScreen","memo","useDocumentTitle","useKanbanSearchParams","kanbans","kanbanIsLoading","currentProject","useProjectInUrl","onDragEnd","useDragEnd","ColumnsContainer","display","height","reorderKanban","params","useReorderKanbanConfig","useReorderKanban","mutate","reorderTask","useReorderTask","useCallback","source","destination","fromId","toId","referenceId","fromKanbanId","toKanbanId","fromTask","toTask"],"sourceRoot":""}